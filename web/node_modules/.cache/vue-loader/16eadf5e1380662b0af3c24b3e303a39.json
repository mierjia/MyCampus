{"remainingRequest":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\download\\InterConnect\\web\\src\\views\\user\\Q&A\\createQ&A.vue?vue&type=style&index=0&id=2e9e0ce3&scoped=true&lang=css&","dependencies":[{"path":"E:\\download\\InterConnect\\web\\src\\views\\user\\Q&A\\createQ&A.vue","mtime":1718020811000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtdGFnICsgLmVsLXRhZyB7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KLmJ1dHRvbi1uZXctdGFnIHsKICBtYXJnaW4tbGVmdDogMTBweDsKICBoZWlnaHQ6IDMycHg7CiAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgcGFkZGluZy10b3A6IDA7CiAgcGFkZGluZy1ib3R0b206IDA7Cn0KLmlucHV0LW5ldy10YWcgewogIHdpZHRoOiA5MHB4OwogIG1hcmdpbi1sZWZ0OiAxMHB4OwogIHZlcnRpY2FsLWFsaWduOiBib3R0b207Cn0K"},{"version":3,"sources":["createQ&A.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createQ&A.vue","sourceRoot":"src/views/user/Q&A","sourcesContent":["<template>\n  <div class=\"crestehelp\">\n    <h2>{{id?'编辑':'创建' }}信息</h2>\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" size=\"medium \">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"form.help_title\" useCustomImageHandler @image-added=\"handleImageAdded\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"分类\">\n        <el-radio\n          v-for=\"(item,id) in lable\"\n          :key=\"id\"\n          :class=\"'page_span_'+id \"\n          v-model=\"form.help_lable\"\n          :label=\"item\" \n        >{{item}}</el-radio>\n      </el-form-item>\n      <el-form-item label=\"标签\">\n        <el-tag\n          :key=\"tag\"\n          v-for=\"tag in dynamicTags\"\n          closable\n          :disable-transitions=\"false\"\n          @close=\"handleClose(tag)\"\n        >{{tag}}</el-tag>\n        <el-input\n          class=\"input-new-tag\"\n          v-if=\"inputVisible\"\n          v-model=\"inputValue\"\n          ref=\"saveTagInput\"\n          size=\"small\"\n          @keyup.enter.native=\"handleInputConfirm\"\n          @blur=\"handleInputConfirm\"\n        ></el-input>\n        <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ 新标签</el-button>\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <vue-editor\n          useCustomImageHandler\n          @image-added=\"handleImageAdded\"\n          v-model=\"form.help_content\"\n        ></vue-editor>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\n        <el-button   @click=\"$router.push('/admin/createhelplist') \">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  data() {\n    return {\n      lable: [],\n      dynamicTags: [],\n      inputVisible: false,\n      inputValue: \"\",\n      dialogVisible: false,\n      form: {\n        help_tag:'',\n        help_title: '',\n        help_lable: '',\n        help_content: ''\n      }\n    };\n  },\n  props: {\n    id: {}\n  },\n  components: {\n    VueEditor\n  },\n  methods: {\n    /**\n     *\n     * 标签相关\n     */\n    handleClose(tag) {\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n    },\n    showInput() {\n      this.inputVisible = true;\n      this.$nextTick(_ => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    handleInputConfirm() {\n      let inputValue = this.inputValue;\n      if (inputValue) {\n        this.dynamicTags.push(inputValue);\n      }\n      this.inputVisible = false;\n      this.inputValue = \"\";\n    },\n    /**\n     * npm install vue2-editor\n     * \n     * 富文本编辑器图片上传\n     */\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader) {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await this.$axios.post(\"/uplod\", formData);\n      console.log(res);\n      Editor.insertEmbed(cursorLocation, \"image\", res.data.url);\n      resetUploader();\n    },\n    //发布与编辑\n    async onSubmit() {\n      let res;\n      this.form.help_tag = String(this.dynamicTags);\n      console.log(this.form)\n      if (this.id) {\n        this.form.id = this.id;\n        res = await this.$axios.post(\n          \"/webadmin/updateehelp\",\n          this.qs.stringify(this.form)\n        );\n      } else {\n        res = await this.$axios.post(\n          \"/webadmin/createhelp\",\n          this.qs.stringify(this.form)\n        );\n      }\n      let data = res.data.data;\n      if (res.data.state.type === \"SUCCESS\") {\n        this.$message.success(\"成功\");\n        this.$router.push(\"/admin/createhelplist\");\n      }\n    },\n    async gethelpdetails() {\n      const res = await this.$axios.post(\n        \"/webadmin/gethelpdetails\",\n        this.qs.stringify({ id: this.id })\n      );\n      let data = res.data.data;\n      // console.log(data)\n      this.form.help_title = data.help_title;\n      this.form.help_lable = data.help_lable;\n      this.form.help_content = data.help_content;\n      this.dynamicTags=data.help_tag.split(\",\");\n    },\n    async lablelist() { \n      let res = await this.$axios.post(\n        \"/admin/lablelist\",\n        this.qs.stringify({ lable_name:'问答分类' })\n      );\n      if (res.data.state.type === \"SUCCESS\") {\n        // this.lable = res.data.data\n          this.lable = JSON.parse(res.data.data[0].lable);\n        console.log(\"分类列表\");\n        console.log(this.lable);\n      }\n    }\n  },\n  created() {\n    this.id && this.gethelpdetails();\n    this.lablelist()\n  }\n};\n</script>\n<style  scoped>\n.el-tag + .el-tag {\n  margin-left: 10px;\n}\n.button-new-tag {\n  margin-left: 10px;\n  height: 32px;\n  line-height: 30px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.input-new-tag {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n</style>"]}]}