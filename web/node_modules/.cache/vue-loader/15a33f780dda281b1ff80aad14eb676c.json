{"remainingRequest":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\download\\InterConnect\\web\\src\\views\\user\\myself.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\download\\InterConnect\\web\\src\\views\\user\\myself.vue","mtime":1718083541000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHVkZW50OiB7CiAgICAgICAgbTogInN0dWRlbnQiLAogICAgICAgIHJlYWxuYW1lOiAiIiwKICAgICAgICBzdHVkZW50aWQ6ICIiLAogICAgICAgIHN0dWRlbnRjYXJkOiBbXQogICAgICB9LAogICAgICBjb21wYW55OiB7CiAgICAgICAgbTogImNvbXBhbnkiLAogICAgICAgIGNvbXBhbnluYW1lOiAiIiwKICAgICAgICBjb21wYW55aW1nOiBbXQogICAgICB9LAogICAgICBmb3JtOiB7CiAgICAgICAgbTogInVzZXIiLAogICAgICAgIGF2YXRhcjogIiIsCiAgICAgICAgbmlja25hbWU6ICIiLAogICAgICAgIHFxOiAiIiwKICAgICAgICBtYWlsOiAiIiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgc3lub3BzaXM6ICIiCiAgICAgIH0sCiAgICAgIGRhdGFmb3JtOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoInVzZXIiLCBbInNldFVzZXJJbmZvIl0pLAogICAgLy/mlofku7bkuIrkvKDmiJDlip/ml7bnmoTpkqnlrZAKICAgIHVwbG9nc3VjY2VzcyhyZXMpIHsKICAgICAgdGhpcy5mb3JtLmF2YXRhciA9IHJlcy51cmw7CiAgICB9LAogICAgLy8KICAgIHN0dWRlbnR1cGxvYWRzdWNjZXNzKHJlcykgewogICAgICB0aGlzLnN0dWRlbnQuc3R1ZGVudGNhcmQucHVzaCh7IHVybDogcmVzLnVybCB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5zdHVkZW50LnN0dWRlbnRjYXJkKTsKICAgICAgY29uc29sZS5sb2cocmVzLnVybCk7CiAgICB9LAogICAgLy/mlofku7bliJfooajnp7vpmaTmlofku7bml7bnmoTpkqnlrZAKICAgIHN0dWRlbnRoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpOwogICAgICBsZXQgYiA9IHRoaXMuc3R1ZGVudC5zdHVkZW50Y2FyZC5pbmRleE9mKGZpbGUpOwogICAgICB0aGlzLnN0dWRlbnQuc3R1ZGVudGNhcmQuc3BsaWNlKGIsIDEpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnN0dWRlbnQuc3R1ZGVudGNhcmQpOwogICAgfSwKICAgIC8vCiAgICBjb21wYW55dXBsb2Fkc3VjY2VzcyhyZXMpIHsKICAgICAgdGhpcy5jb21wYW55LmNvbXBhbnlpbWcucHVzaCh7IHVybDogcmVzLnVybCB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5jb21wYW55LmNvbXBhbnlpbWcpOwogICAgICBjb25zb2xlLmxvZyhyZXMudXJsKTsKICAgIH0sCiAgICAvL+aWh+S7tuWIl+ihqOenu+mZpOaWh+S7tuaXtueahOmSqeWtkAogICAgY29tcGFueWhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCk7CiAgICAgIGxldCBiID0gdGhpcy5jb21wYW55LmNvbXBhbnlpbWcuaW5kZXhPZihmaWxlKTsKICAgICAgdGhpcy5jb21wYW55LmNvbXBhbnlpbWcuc3BsaWNlKGIsIDEpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbXBhbnkuY29tcGFueWltZyk7CiAgICB9LAogICAgLy/lrabnlJ/orqTor4EKICAgIG9uU3VibWl0c3R1ZGVudCgpIHsKICAgICAgdGhpcy5kYXRhZm9ybSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuc3R1ZGVudCk7CiAgICAgIHRoaXMuZGF0YWZvcm0gPSBKU09OLnBhcnNlKHRoaXMuZGF0YWZvcm0pOwogICAgICB0aGlzLmRhdGFmb3JtLnN0dWRlbnRjYXJkID0gSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhZm9ybS5zdHVkZW50Y2FyZCk7CiAgICAgIGNvbnNvbGUubG9nKCkKICAgICAgdGhpcy5zdHVkZW50YW5kY29tcGFueSggdGhpcy5kYXRhZm9ybS5zdHVkZW50Y2FyZCk7CiAgICB9LAogICAgICAgIC8v5L+h5oGv6K6k6K+BCiAgICBhc3luYyBzdHVkZW50YW5kY29tcGFueSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhZm9ybSk7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoCiAgICAgICAgIi93ZWJhZG1pbi91cGRhdGF1c2VyIiwKICAgICAgICB0aGlzLnFzLnN0cmluZ2lmeSh0aGlzLmRhdGFmb3JtKQogICAgICApOwogICAgICBpZiAocmVzLmRhdGEuc3RhdGUudHlwZSA9PT0gIlNVQ0NFU1MiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv6Hmga/mj5DkuqTmiJDlip/nrYnlvoXlrqHmoLgiKTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy/nlKjmiLfkv6Hmga/kv67mlLkKICAgIGFzeW5jIG9uU3VibWl0KCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KAogICAgICAgICIvd2ViYWRtaW4vdXBkYXRhdXNlciIsCiAgICAgICAgdGhpcy5xcy5zdHJpbmdpZnkodGhpcy5mb3JtKQogICAgICApOwogICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZS50eXBlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaIkOWKnyIpOwogICAgICAgIGNvbnNvbGUubG9nKGRhdGEudXNlcmluZm8pCiAgICAgICAgdGhpcy5zZXRVc2VySW5mbyhkYXRhLnVzZXJpbmZvKTsKICAgICAgfQogICAgfSwKICAgIC8v6I635Y+W55So5oi35L+h5oGvCiAgICBhc3luYyBnZXR1c2VyKCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgiL3dlYmFkbWluL2dldHVzZXIiKTsKICAgICAgdGhpcy5mb3JtID0gcmVzLmRhdGEuZGF0YTsKICAgICAgdGhpcy5mb3JtLnJlYWxzdGF0ZSA9IHRoaXMuZm9ybS5yZWFsc3RhdGUgKiAxOwogICAgICB0aGlzLnN0dWRlbnQgPSB7CiAgICAgICAgbTogInN0dWRlbnQiLAogICAgICAgIHJlYWxuYW1lOiB0aGlzLmZvcm0ucmVhbG5hbWUsCiAgICAgICAgc3R1ZGVudGlkOiB0aGlzLmZvcm0uc3R1ZGVudGlkLAogICAgICAgIHN0dWRlbnRjYXJkOiBKU09OLnBhcnNlKHRoaXMuZm9ybS5zdHVkZW50Y2FyZCkKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZm9ybS5zdHVkZW50Y2FyZCA9PSBudWxsKSB0aGlzLnN0dWRlbnQuc3R1ZGVudGNhcmQgPSBbXTsKICAgICAgdGhpcy5jb21wYW55ID0gewogICAgICAgIG06ICJjb21wYW55IiwKICAgICAgICBjb21wYW55bmFtZTogdGhpcy5mb3JtLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlpbWc6IEpTT04ucGFyc2UodGhpcy5mb3JtLmNvbXBhbnlpbWcpCiAgICAgIH07CiAgICAgIGlmICh0aGlzLmZvcm0uY29tcGFueWltZyA9PSBudWxsKSB0aGlzLmNvbXBhbnkuY29tcGFueWltZyA9IFtdOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0pOwogICAgICB0aGlzLmZvcm0uIG09ICJ1c2VyIiwKICAgICAgY29uc29sZS5sb2codGhpcy5zdHVkZW50KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldHVzZXIoKTsKICB9Cn07Cg=="},{"version":3,"sources":["myself.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myself.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"myself\">\n    <h2>信息编辑</h2>\n    <el-tabs type=\"border-card\">\n      <el-tab-pane label=\"个人信息编辑\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" size=\"medium \">\n          <el-form-item label=\"头像\">\n            <el-upload\n              :action=\"$axios.defaults.baseURL+'/uplod'\"\n              :show-file-list=\"false\"\n              :on-success=\"uplogsuccess\"\n              class=\"avatar-uploader\"\n            >\n              <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avata\" />\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          <el-form-item label=\"昵称\">\n            <el-input v-model=\"form.nickname\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\">\n            <el-input v-model=\"form.mail\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"qq\">\n            <el-input v-model=\"form.qq\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"电话\">\n            <el-input v-model=\"form.phone\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"个人简介\">\n            <el-input type=\"textarea\" v-model=\"form.synopsis\" rows=\"4\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\n            <el-button>取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane label=\"实名认证\">\n        <el-steps :active=\"form.realstate\" align-center>\n          <el-step title=\"填写个人信息\" description></el-step>\n          <el-step title=\"审核中\" description></el-step>\n          <el-step title=\"认证通过\" description></el-step>\n        </el-steps>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" size=\"medium \">\n          <el-form-item label=\"姓名\">\n            <el-input\n              v-model=\"student.realname\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"学号\">\n            <el-input\n              v-model=\"student.studentid\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"学生证\">\n            <el-upload\n              :action=\"$axios.defaults.baseURL+'/uplod'\"\n              list-type=\"picture-card\"\n              :on-success=\"studentuploadsuccess\"\n              :on-remove=\"studenthandleRemove\"\n              :file-list=\"this.student.studentcard\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            >\n              <i class=\"el-icon-plus\" ></i>\n            </el-upload>\n            <el-dialog>\n              <img width=\"100%\" :src=\"student.studentcard\" alt />\n            </el-dialog>\n          </el-form-item>\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              @click=\"onSubmitstudent\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            >确定</el-button>\n            <el-button>取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      \n    </el-tabs>\n  </div>\n</template>\n<script>\nimport { mapActions } from \"vuex\";\nexport default {\n  data() {\n    return {\n      student: {\n        m: \"student\",\n        realname: \"\",\n        studentid: \"\",\n        studentcard: []\n      },\n      company: {\n        m: \"company\",\n        companyname: \"\",\n        companyimg: []\n      },\n      form: {\n        m: \"user\",\n        avatar: \"\",\n        nickname: \"\",\n        qq: \"\",\n        mail: \"\",\n        phone: \"\",\n        synopsis: \"\"\n      },\n      dataform: {}\n    };\n  },\n  methods: {\n    ...mapActions(\"user\", [\"setUserInfo\"]),\n    //文件上传成功时的钩子\n    uplogsuccess(res) {\n      this.form.avatar = res.url;\n    },\n    //\n    studentuploadsuccess(res) {\n      this.student.studentcard.push({ url: res.url });\n      console.log(this.student.studentcard);\n      console.log(res.url);\n    },\n    //文件列表移除文件时的钩子\n    studenthandleRemove(file, fileList) {\n      console.log(file, fileList);\n      let b = this.student.studentcard.indexOf(file);\n      this.student.studentcard.splice(b, 1);\n      console.log(this.student.studentcard);\n    },\n    //\n    companyuploadsuccess(res) {\n      this.company.companyimg.push({ url: res.url });\n      console.log(this.company.companyimg);\n      console.log(res.url);\n    },\n    //文件列表移除文件时的钩子\n    companyhandleRemove(file, fileList) {\n      console.log(file, fileList);\n      let b = this.company.companyimg.indexOf(file);\n      this.company.companyimg.splice(b, 1);\n      console.log(this.company.companyimg);\n    },\n    //学生认证\n    onSubmitstudent() {\n      this.dataform = JSON.stringify(this.student);\n      this.dataform = JSON.parse(this.dataform);\n      this.dataform.studentcard = JSON.stringify(this.dataform.studentcard);\n      console.log()\n      this.studentandcompany( this.dataform.studentcard);\n    },\n        //信息认证\n    async studentandcompany() {\n      console.log(this.dataform);\n      const res = await this.$axios.post(\n        \"/webadmin/updatauser\",\n        this.qs.stringify(this.dataform)\n      );\n      if (res.data.state.type === \"SUCCESS\") {\n        this.$message.success(\"信息提交成功等待审核\");\n      }\n    },\n    \n    //用户信息修改\n    async onSubmit() {\n      const res = await this.$axios.post(\n        \"/webadmin/updatauser\",\n        this.qs.stringify(this.form)\n      );\n      let data = res.data.data;\n      if (res.data.state.type === \"SUCCESS\") {\n        this.$message.success(\"成功\");\n        console.log(data.userinfo)\n        this.setUserInfo(data.userinfo);\n      }\n    },\n    //获取用户信息\n    async getuser() {\n      let res = await this.$axios.post(\"/webadmin/getuser\");\n      this.form = res.data.data;\n      this.form.realstate = this.form.realstate * 1;\n      this.student = {\n        m: \"student\",\n        realname: this.form.realname,\n        studentid: this.form.studentid,\n        studentcard: JSON.parse(this.form.studentcard)\n      };\n      if (this.form.studentcard == null) this.student.studentcard = [];\n      this.company = {\n        m: \"company\",\n        companyname: this.form.companyname,\n        companyimg: JSON.parse(this.form.companyimg)\n      };\n      if (this.form.companyimg == null) this.company.companyimg = [];\n      // console.log(this.form);\n      this.form. m= \"user\",\n      console.log(this.student);\n    }\n  },\n  created() {\n    this.getuser();\n  }\n};\n</script>\n<style >\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avata {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n\n"]}]}