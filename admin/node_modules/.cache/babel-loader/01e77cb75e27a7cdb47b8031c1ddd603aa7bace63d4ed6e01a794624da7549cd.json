{"ast":null,"code":"import _regeneratorRuntime from \"E:/download/InterConnect/admin/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/download/InterConnect/admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'admin',\n  data: function data() {\n    return {\n      changepassword: {},\n      dialogpw: false,\n      //密码框\n      loading: false,\n      dialogFormVisibleadd: false,\n      //添加弹框\n      form: {},\n      user: {\n        username: '',\n        password: '',\n        password1: ''\n      },\n      pagelistquery: {\n        total: 0,\n        page: 1,\n        pagesize: 10,\n        kefu_type: 'fankui',\n        state: '0',\n        id: ''\n      },\n      tableData: [] //列表信息\n    };\n  },\n  methods: {\n    changestate: function changestate(row, state) {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var data, res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              data = {\n                kefu_id: row.fankui_id,\n                kefu_state: state,\n                type: 'fankui'\n              };\n              _context.next = 3;\n              return _this.$axios.post('/admin/changkefustate', _this.qs.stringify(data));\n            case 3:\n              res = _context.sent;\n              if (res.data.state.type === 'SUCCESS') {\n                _this.$message.success('状态更改成功');\n                _this.kefulist();\n              }\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    //删除\n    deletkefu: function deletkefu(row) {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.$confirm('确认删除吗?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }).then(function (res) {\n                _this2.$axios.post('/admin/deletekefu', _this2.qs.stringify({\n                  id: row.fankui_id,\n                  type: 'fankui'\n                })).then(function (res) {\n                  if (res.data.state.type === 'SUCCESS') {\n                    _this2.$message.success('删除成功');\n                    _this2.kefulist();\n                  }\n                });\n              });\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.pagelistquery.pagesize = val;\n      this.kefulist();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.pagelistquery.page = val;\n      this.kefulist();\n    },\n    kefulist: function kefulist() {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _this3.loading = true;\n              _context3.next = 3;\n              return _this3.$axios.post('/admin/kefullist', _this3.qs.stringify(_this3.pagelistquery));\n            case 3:\n              res = _context3.sent;\n              if (res.data.state.type === 'SUCCESS') {\n                _this3.tableData = res.data.data;\n                _this3.pagelistquery.total = res.data.count;\n              }\n              _this3.loading = false;\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    }\n  },\n  created: function created() {\n    this.kefulist();\n  }\n};","map":{"version":3,"names":["name","data","changepassword","dialogpw","loading","dialogFormVisibleadd","form","user","username","password","password1","pagelistquery","total","page","pagesize","kefu_type","state","id","tableData","methods","changestate","row","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","kefu_id","fankui_id","kefu_state","type","$axios","post","qs","stringify","sent","$message","success","kefulist","stop","deletkefu","_this2","_callee2","_callee2$","_context2","$confirm","confirmButtonText","cancelButtonText","then","handleSizeChange","val","handleCurrentChange","_this3","_callee3","_callee3$","_context3","count","created"],"sources":["src/views/message/feedback.vue"],"sourcesContent":["<template>\n  <div class=\"feedback\">\n    <el-main>\n      <div class=\"top\">\n        <el-breadcrumb separator=\"/\">\n          <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n          <el-breadcrumb-item>反馈中心</el-breadcrumb-item>\n          <el-breadcrumb-item>意见反馈</el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n\n      <div class=\"main\">\n        <div class=\"search\">\n          <el-form\n            :inline=\"true\"\n            :model=\"pagelistquery\"\n            class=\"demo-form-inline\"\n          >\n            <el-form-item>\n              <el-select v-model=\"pagelistquery.state\" placeholder=\"账号状态\">\n                <el-option label=\"已处理\" value=\"1\"></el-option>\n                <el-option label=\"未处理\" value=\"0\"></el-option>\n                <el-option label=\"标记\" value=\"2\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"kefulist\">查询</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n\n        <el-table\n          :data=\"tableData\"\n          border\n          style=\"width: 100%;min-height:500px\"\n          v-loading=\"loading\"\n          element-loading-text=\"拼命加载中\"\n          element-loading-spinner=\"el-icon-loading\"\n        >\n          <el-table-column prop=\"createtime\" label=\"创建日期\">\n            <template slot-scope=\"scope\">{{\n              scope.row.fankui_createtime | dataFormat\n            }}</template>\n          </el-table-column>\n          <el-table-column prop=\"fankui_user\" label=\"邮箱\"></el-table-column>\n          <el-table-column\n            prop=\"fankui_content\"\n            label=\"反馈内容分\"\n          ></el-table-column>\n          <el-table-column label=\"状态\" prop=\"fankui_state\">\n            <template slot-scope=\"scope\">\n              <span style=\"color:#409eff\" v-if=\"scope.row.fankui_state == 0\"\n                >未处理</span\n              >\n              <span style=\"color:#6cbb7a\" v-if=\"scope.row.fankui_state == 1\"\n                >已处理</span\n              >\n              <span style=\"color:#f60c6c\" v-if=\"scope.row.fankui_state == 2\"\n                >标记</span\n              >\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"admin\" label=\"管理员\"></el-table-column>\n          <el-table-column\n            prop=\"nickname\"\n            fixed=\"right\"\n            label=\"操作\"\n            width=\"170\"\n          >\n            <template slot-scope=\"scope\">\n              <el-button\n                type=\"text\"\n                size=\"small\"\n                @click=\"changestate(scope.row, 2)\"\n                >标记</el-button\n              >\n              <el-button\n                type=\"text\"\n                size=\"small\"\n                @click=\"changestate(scope.row, 1)\"\n                >已处理</el-button\n              >\n              <el-button\n                type=\"text\"\n                size=\"small\"\n                :disabled=\"scope.row.username == 'admin'\"\n                @click=\"deletkefu(scope.row)\"\n                >删除</el-button\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!--分页-->\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :page-size=\"pagelistquery.pagesize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"pagelistquery.total\"\n          style=\"margin-top: 20px;\"\n        ></el-pagination>\n      </div>\n    </el-main>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'admin',\n  data() {\n    return {\n      changepassword: {},\n      dialogpw: false, //密码框\n      loading: false,\n      dialogFormVisibleadd: false, //添加弹框\n      form: {},\n      user: {\n        username: '',\n        password: '',\n        password1: ''\n      },\n      pagelistquery: {\n        total: 0,\n        page: 1,\n        pagesize: 10,\n        kefu_type: 'fankui',\n        state: '0',\n        id: ''\n      },\n      tableData: [] //列表信息\n    }\n  },\n  methods: {\n    async changestate(row, state) {\n      let data = {\n        kefu_id: row.fankui_id,\n        kefu_state: state,\n        type: 'fankui'\n      }\n      let res = await this.$axios.post(\n        '/admin/changkefustate',\n        this.qs.stringify(data)\n      )\n      if (res.data.state.type === 'SUCCESS') {\n        this.$message.success('状态更改成功')\n        this.kefulist()\n      }\n    },\n\n    //删除\n    async deletkefu(row) {\n        this.$confirm('确认删除吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(res => {\n          this.$axios.post(\n          '/admin/deletekefu',\n          this.qs.stringify({ id: row.fankui_id, type: 'fankui' })\n        ).then(res => {\n          if (res.data.state.type === 'SUCCESS') {\n            this.$message.success('删除成功')\n            this.kefulist()\n          }\n        })\n      })\n    },\n    handleSizeChange(val) {\n      this.pagelistquery.pagesize = val\n      this.kefulist()\n    },\n    handleCurrentChange(val) {\n      this.pagelistquery.page = val\n      this.kefulist()\n    },\n    async kefulist() {\n      this.loading = true\n      let res = await this.$axios.post(\n        '/admin/kefullist',\n        this.qs.stringify(this.pagelistquery)\n      )\n      if (res.data.state.type === 'SUCCESS') {\n        this.tableData = res.data.data\n        this.pagelistquery.total = res.data.count\n      }\n      this.loading = false\n    }\n  },\n  created() {\n    this.kefulist()\n  }\n}\n</script>\n<style scoped>\n.top {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: calc(100% - 35px);\n  padding: 12px 16px;\n  background-color: #fff;\n}\n.feedback {\n  position: relative;\n  width: 100%;\n}\n.main {\n  margin-top: 40px;\n  padding: 20px;\n  background-color: #fff;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}