{"remainingRequest":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\download\\InterConnect\\web\\src\\views\\user\\Q&A\\createQ&A.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\download\\InterConnect\\web\\src\\views\\user\\Q&A\\createQ&A.vue","mtime":1718020811000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gInZ1ZTItZWRpdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYWJsZTogW10sCiAgICAgIGR5bmFtaWNUYWdzOiBbXSwKICAgICAgaW5wdXRWaXNpYmxlOiBmYWxzZSwKICAgICAgaW5wdXRWYWx1ZTogIiIsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgaGVscF90YWc6JycsCiAgICAgICAgaGVscF90aXRsZTogJycsCiAgICAgICAgaGVscF9sYWJsZTogJycsCiAgICAgICAgaGVscF9jb250ZW50OiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGlkOiB7fQogIH0sCiAgY29tcG9uZW50czogewogICAgVnVlRWRpdG9yCiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqCiAgICAgKiDmoIfnrb7nm7jlhbMKICAgICAqLwogICAgaGFuZGxlQ2xvc2UodGFnKSB7CiAgICAgIHRoaXMuZHluYW1pY1RhZ3Muc3BsaWNlKHRoaXMuZHluYW1pY1RhZ3MuaW5kZXhPZih0YWcpLCAxKTsKICAgIH0sCiAgICBzaG93SW5wdXQoKSB7CiAgICAgIHRoaXMuaW5wdXRWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soXyA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5zYXZlVGFnSW5wdXQuJHJlZnMuaW5wdXQuZm9jdXMoKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlSW5wdXRDb25maXJtKCkgewogICAgICBsZXQgaW5wdXRWYWx1ZSA9IHRoaXMuaW5wdXRWYWx1ZTsKICAgICAgaWYgKGlucHV0VmFsdWUpIHsKICAgICAgICB0aGlzLmR5bmFtaWNUYWdzLnB1c2goaW5wdXRWYWx1ZSk7CiAgICAgIH0KICAgICAgdGhpcy5pbnB1dFZpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5pbnB1dFZhbHVlID0gIiI7CiAgICB9LAogICAgLyoqCiAgICAgKiBucG0gaW5zdGFsbCB2dWUyLWVkaXRvcgogICAgICogCiAgICAgKiDlr4zmlofmnKznvJbovpHlmajlm77niYfkuIrkvKAKICAgICAqLwogICAgYXN5bmMgaGFuZGxlSW1hZ2VBZGRlZChmaWxlLCBFZGl0b3IsIGN1cnNvckxvY2F0aW9uLCByZXNldFVwbG9hZGVyKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUpOwogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KCIvdXBsb2QiLCBmb3JtRGF0YSk7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIEVkaXRvci5pbnNlcnRFbWJlZChjdXJzb3JMb2NhdGlvbiwgImltYWdlIiwgcmVzLmRhdGEudXJsKTsKICAgICAgcmVzZXRVcGxvYWRlcigpOwogICAgfSwKICAgIC8v5Y+R5biD5LiO57yW6L6RCiAgICBhc3luYyBvblN1Ym1pdCgpIHsKICAgICAgbGV0IHJlczsKICAgICAgdGhpcy5mb3JtLmhlbHBfdGFnID0gU3RyaW5nKHRoaXMuZHluYW1pY1RhZ3MpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pCiAgICAgIGlmICh0aGlzLmlkKSB7CiAgICAgICAgdGhpcy5mb3JtLmlkID0gdGhpcy5pZDsKICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KAogICAgICAgICAgIi93ZWJhZG1pbi91cGRhdGVlaGVscCIsCiAgICAgICAgICB0aGlzLnFzLnN0cmluZ2lmeSh0aGlzLmZvcm0pCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KAogICAgICAgICAgIi93ZWJhZG1pbi9jcmVhdGVoZWxwIiwKICAgICAgICAgIHRoaXMucXMuc3RyaW5naWZ5KHRoaXMuZm9ybSkKICAgICAgICApOwogICAgICB9CiAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgaWYgKHJlcy5kYXRhLnN0YXRlLnR5cGUgPT09ICJTVUNDRVNTIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5oiQ5YqfIik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hZG1pbi9jcmVhdGVoZWxwbGlzdCIpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0aGVscGRldGFpbHMoKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoCiAgICAgICAgIi93ZWJhZG1pbi9nZXRoZWxwZGV0YWlscyIsCiAgICAgICAgdGhpcy5xcy5zdHJpbmdpZnkoeyBpZDogdGhpcy5pZCB9KQogICAgICApOwogICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgIHRoaXMuZm9ybS5oZWxwX3RpdGxlID0gZGF0YS5oZWxwX3RpdGxlOwogICAgICB0aGlzLmZvcm0uaGVscF9sYWJsZSA9IGRhdGEuaGVscF9sYWJsZTsKICAgICAgdGhpcy5mb3JtLmhlbHBfY29udGVudCA9IGRhdGEuaGVscF9jb250ZW50OwogICAgICB0aGlzLmR5bmFtaWNUYWdzPWRhdGEuaGVscF90YWcuc3BsaXQoIiwiKTsKICAgIH0sCiAgICBhc3luYyBsYWJsZWxpc3QoKSB7IAogICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgKICAgICAgICAiL2FkbWluL2xhYmxlbGlzdCIsCiAgICAgICAgdGhpcy5xcy5zdHJpbmdpZnkoeyBsYWJsZV9uYW1lOifpl67nrZTliIbnsbsnIH0pCiAgICAgICk7CiAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZS50eXBlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICAvLyB0aGlzLmxhYmxlID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgdGhpcy5sYWJsZSA9IEpTT04ucGFyc2UocmVzLmRhdGEuZGF0YVswXS5sYWJsZSk7CiAgICAgICAgY29uc29sZS5sb2coIuWIhuexu+WIl+ihqCIpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGFibGUpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pZCAmJiB0aGlzLmdldGhlbHBkZXRhaWxzKCk7CiAgICB0aGlzLmxhYmxlbGlzdCgpCiAgfQp9Owo="},{"version":3,"sources":["createQ&A.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createQ&A.vue","sourceRoot":"src/views/user/Q&A","sourcesContent":["<template>\n  <div class=\"crestehelp\">\n    <h2>{{id?'编辑':'创建' }}信息</h2>\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" size=\"medium \">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"form.help_title\" useCustomImageHandler @image-added=\"handleImageAdded\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"分类\">\n        <el-radio\n          v-for=\"(item,id) in lable\"\n          :key=\"id\"\n          :class=\"'page_span_'+id \"\n          v-model=\"form.help_lable\"\n          :label=\"item\" \n        >{{item}}</el-radio>\n      </el-form-item>\n      <el-form-item label=\"标签\">\n        <el-tag\n          :key=\"tag\"\n          v-for=\"tag in dynamicTags\"\n          closable\n          :disable-transitions=\"false\"\n          @close=\"handleClose(tag)\"\n        >{{tag}}</el-tag>\n        <el-input\n          class=\"input-new-tag\"\n          v-if=\"inputVisible\"\n          v-model=\"inputValue\"\n          ref=\"saveTagInput\"\n          size=\"small\"\n          @keyup.enter.native=\"handleInputConfirm\"\n          @blur=\"handleInputConfirm\"\n        ></el-input>\n        <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ 新标签</el-button>\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <vue-editor\n          useCustomImageHandler\n          @image-added=\"handleImageAdded\"\n          v-model=\"form.help_content\"\n        ></vue-editor>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\n        <el-button   @click=\"$router.push('/admin/createhelplist') \">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  data() {\n    return {\n      lable: [],\n      dynamicTags: [],\n      inputVisible: false,\n      inputValue: \"\",\n      dialogVisible: false,\n      form: {\n        help_tag:'',\n        help_title: '',\n        help_lable: '',\n        help_content: ''\n      }\n    };\n  },\n  props: {\n    id: {}\n  },\n  components: {\n    VueEditor\n  },\n  methods: {\n    /**\n     *\n     * 标签相关\n     */\n    handleClose(tag) {\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n    },\n    showInput() {\n      this.inputVisible = true;\n      this.$nextTick(_ => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    handleInputConfirm() {\n      let inputValue = this.inputValue;\n      if (inputValue) {\n        this.dynamicTags.push(inputValue);\n      }\n      this.inputVisible = false;\n      this.inputValue = \"\";\n    },\n    /**\n     * npm install vue2-editor\n     * \n     * 富文本编辑器图片上传\n     */\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader) {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await this.$axios.post(\"/uplod\", formData);\n      console.log(res);\n      Editor.insertEmbed(cursorLocation, \"image\", res.data.url);\n      resetUploader();\n    },\n    //发布与编辑\n    async onSubmit() {\n      let res;\n      this.form.help_tag = String(this.dynamicTags);\n      console.log(this.form)\n      if (this.id) {\n        this.form.id = this.id;\n        res = await this.$axios.post(\n          \"/webadmin/updateehelp\",\n          this.qs.stringify(this.form)\n        );\n      } else {\n        res = await this.$axios.post(\n          \"/webadmin/createhelp\",\n          this.qs.stringify(this.form)\n        );\n      }\n      let data = res.data.data;\n      if (res.data.state.type === \"SUCCESS\") {\n        this.$message.success(\"成功\");\n        this.$router.push(\"/admin/createhelplist\");\n      }\n    },\n    async gethelpdetails() {\n      const res = await this.$axios.post(\n        \"/webadmin/gethelpdetails\",\n        this.qs.stringify({ id: this.id })\n      );\n      let data = res.data.data;\n      // console.log(data)\n      this.form.help_title = data.help_title;\n      this.form.help_lable = data.help_lable;\n      this.form.help_content = data.help_content;\n      this.dynamicTags=data.help_tag.split(\",\");\n    },\n    async lablelist() { \n      let res = await this.$axios.post(\n        \"/admin/lablelist\",\n        this.qs.stringify({ lable_name:'问答分类' })\n      );\n      if (res.data.state.type === \"SUCCESS\") {\n        // this.lable = res.data.data\n          this.lable = JSON.parse(res.data.data[0].lable);\n        console.log(\"分类列表\");\n        console.log(this.lable);\n      }\n    }\n  },\n  created() {\n    this.id && this.gethelpdetails();\n    this.lablelist()\n  }\n};\n</script>\n<style  scoped>\n.el-tag + .el-tag {\n  margin-left: 10px;\n}\n.button-new-tag {\n  margin-left: 10px;\n  height: 32px;\n  line-height: 30px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.input-new-tag {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n</style>"]}]}