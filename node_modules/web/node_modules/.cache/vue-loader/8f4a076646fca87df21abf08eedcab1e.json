{"remainingRequest":"D:\\Desktop\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\InterConnect\\web\\src\\views\\user\\myself.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\Desktop\\InterConnect\\web\\src\\views\\user\\myself.vue","mtime":1718083541427},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZCB7CiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQ6aG92ZXIgewogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsKfQouYXZhdGFyLXVwbG9hZGVyLWljb24gewogIGZvbnQtc2l6ZTogMjhweDsKICBjb2xvcjogIzhjOTM5ZDsKICB3aWR0aDogMTc4cHg7CiAgaGVpZ2h0OiAxNzhweDsKICBsaW5lLWhlaWdodDogMTc4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5hdmF0YSB7CiAgd2lkdGg6IDE3OHB4OwogIGhlaWdodDogMTc4cHg7CiAgZGlzcGxheTogYmxvY2s7Cn0K"},{"version":3,"sources":["myself.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myself.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"myself\">\n    <h2>信息编辑</h2>\n    <el-tabs type=\"border-card\">\n      <el-tab-pane label=\"个人信息编辑\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" size=\"medium \">\n          <el-form-item label=\"头像\">\n            <el-upload\n              :action=\"$axios.defaults.baseURL+'/uplod'\"\n              :show-file-list=\"false\"\n              :on-success=\"uplogsuccess\"\n              class=\"avatar-uploader\"\n            >\n              <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avata\" />\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          <el-form-item label=\"昵称\">\n            <el-input v-model=\"form.nickname\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\">\n            <el-input v-model=\"form.mail\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"qq\">\n            <el-input v-model=\"form.qq\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"电话\">\n            <el-input v-model=\"form.phone\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"个人简介\">\n            <el-input type=\"textarea\" v-model=\"form.synopsis\" rows=\"4\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\n            <el-button>取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane label=\"实名认证\">\n        <el-steps :active=\"form.realstate\" align-center>\n          <el-step title=\"填写个人信息\" description></el-step>\n          <el-step title=\"审核中\" description></el-step>\n          <el-step title=\"认证通过\" description></el-step>\n        </el-steps>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" size=\"medium \">\n          <el-form-item label=\"姓名\">\n            <el-input\n              v-model=\"student.realname\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"学号\">\n            <el-input\n              v-model=\"student.studentid\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"学生证\">\n            <el-upload\n              :action=\"$axios.defaults.baseURL+'/uplod'\"\n              list-type=\"picture-card\"\n              :on-success=\"studentuploadsuccess\"\n              :on-remove=\"studenthandleRemove\"\n              :file-list=\"this.student.studentcard\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            >\n              <i class=\"el-icon-plus\" ></i>\n            </el-upload>\n            <el-dialog>\n              <img width=\"100%\" :src=\"student.studentcard\" alt />\n            </el-dialog>\n          </el-form-item>\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              @click=\"onSubmitstudent\"\n              :disabled=\"form.realstate ===2|| form.realstate === 3\"\n            >确定</el-button>\n            <el-button>取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      \n    </el-tabs>\n  </div>\n</template>\n<script>\nimport { mapActions } from \"vuex\";\nexport default {\n  data() {\n    return {\n      student: {\n        m: \"student\",\n        realname: \"\",\n        studentid: \"\",\n        studentcard: []\n      },\n      company: {\n        m: \"company\",\n        companyname: \"\",\n        companyimg: []\n      },\n      form: {\n        m: \"user\",\n        avatar: \"\",\n        nickname: \"\",\n        qq: \"\",\n        mail: \"\",\n        phone: \"\",\n        synopsis: \"\"\n      },\n      dataform: {}\n    };\n  },\n  methods: {\n    ...mapActions(\"user\", [\"setUserInfo\"]),\n    //文件上传成功时的钩子\n    uplogsuccess(res) {\n      this.form.avatar = res.url;\n    },\n    //\n    studentuploadsuccess(res) {\n      this.student.studentcard.push({ url: res.url });\n      console.log(this.student.studentcard);\n      console.log(res.url);\n    },\n    //文件列表移除文件时的钩子\n    studenthandleRemove(file, fileList) {\n      console.log(file, fileList);\n      let b = this.student.studentcard.indexOf(file);\n      this.student.studentcard.splice(b, 1);\n      console.log(this.student.studentcard);\n    },\n    //\n    companyuploadsuccess(res) {\n      this.company.companyimg.push({ url: res.url });\n      console.log(this.company.companyimg);\n      console.log(res.url);\n    },\n    //文件列表移除文件时的钩子\n    companyhandleRemove(file, fileList) {\n      console.log(file, fileList);\n      let b = this.company.companyimg.indexOf(file);\n      this.company.companyimg.splice(b, 1);\n      console.log(this.company.companyimg);\n    },\n    //学生认证\n    onSubmitstudent() {\n      this.dataform = JSON.stringify(this.student);\n      this.dataform = JSON.parse(this.dataform);\n      this.dataform.studentcard = JSON.stringify(this.dataform.studentcard);\n      console.log()\n      this.studentandcompany( this.dataform.studentcard);\n    },\n        //信息认证\n    async studentandcompany() {\n      console.log(this.dataform);\n      const res = await this.$axios.post(\n        \"/webadmin/updatauser\",\n        this.qs.stringify(this.dataform)\n      );\n      if (res.data.state.type === \"SUCCESS\") {\n        this.$message.success(\"信息提交成功等待审核\");\n      }\n    },\n    \n    //用户信息修改\n    async onSubmit() {\n      const res = await this.$axios.post(\n        \"/webadmin/updatauser\",\n        this.qs.stringify(this.form)\n      );\n      let data = res.data.data;\n      if (res.data.state.type === \"SUCCESS\") {\n        this.$message.success(\"成功\");\n        console.log(data.userinfo)\n        this.setUserInfo(data.userinfo);\n      }\n    },\n    //获取用户信息\n    async getuser() {\n      let res = await this.$axios.post(\"/webadmin/getuser\");\n      this.form = res.data.data;\n      this.form.realstate = this.form.realstate * 1;\n      this.student = {\n        m: \"student\",\n        realname: this.form.realname,\n        studentid: this.form.studentid,\n        studentcard: JSON.parse(this.form.studentcard)\n      };\n      if (this.form.studentcard == null) this.student.studentcard = [];\n      this.company = {\n        m: \"company\",\n        companyname: this.form.companyname,\n        companyimg: JSON.parse(this.form.companyimg)\n      };\n      if (this.form.companyimg == null) this.company.companyimg = [];\n      // console.log(this.form);\n      this.form. m= \"user\",\n      console.log(this.student);\n    }\n  },\n  created() {\n    this.getuser();\n  }\n};\n</script>\n<style >\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avata {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n\n"]}]}