{"remainingRequest":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\download\\InterConnect\\web\\src\\views\\index.vue?vue&type=style&index=0&id=7caf4476&scoped=true&lang=css&","dependencies":[{"path":"E:\\download\\InterConnect\\web\\src\\views\\index.vue","mtime":1728637460637},{"path":"E:\\download\\InterConnect\\web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\download\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmhlYWRlci1idG4gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmM2OTZkOw0KICBmb250LXNpemU6IDE0cHg7DQogIGxpbmUtaGVpZ2h0OiAxOXB4Ow0KICBmb250LXdlaWdodDogNjAwOw0KICBwYWRkaW5nOiAxNHB4IDMwcHggMTVweDsNCiAgY29sb3I6ICNmZmY7DQogIGRpc3BsYXk6IHRhYmxlOw0KICBtYXJnaW46IDAgYXV0bzsNCn0NCiNtYXNrIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB6LWluZGV4OiA5OTk7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgYmFja2dyb3VuZDogIzAwMDsNCiAgZmlsdGVyOiBhbHBoYShPcGFjaXR5PTMwKTsNCiAgb3BhY2l0eTogMC4yOw0KICBtYXJnaW46IDA7DQogIC8qIGRpc3BsYXk6IG5vbmU7ICAqLw0KfQ0KI2xvZ2luQm94IHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBsZWZ0OiA1MCU7IC8qIOWumuS9jeeItue6p+eahDUwJSAqLw0KICB0b3A6IDUwJTsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IC8q6Ieq5bex55qENTAlICovDQogIHotaW5kZXg6IDEwMDA7DQogIHdpZHRoOiAzODBweDsNCiAgaGVpZ2h0OiAzMzBweDsNCiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgLyogZGlzcGxheTogbm9uZTsgICovDQp9DQojbG9naW5Cb3ggaDIgew0KICBoZWlnaHQ6IDQwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgbGluZS1oZWlnaHQ6IDQwcHg7DQogIGZvbnQtc2l6ZTogMTRweDsNCiAgbGV0dGVyLXNwYWNpbmc6IDFweDsNCiAgY29sb3I6ICM2NjY7DQogIC8qIGJhY2tncm91bmQ6IHVybCguLi9pbWFnZXMvbG9naW5faGVhZGVyLnBuZykgcmVwZWF0LXg7ICovDQogIG1hcmdpbjogMDsNCiAgcGFkZGluZzogMDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7DQogIG1hcmdpbjogMCAwIDIwcHggMDsNCn0NCiNsb2dpbkJveCBoMiBpbWcgew0KICBkaXNwbGF5OiBibG9jazsNCiAgZmxvYXQ6IHJpZ2h0Ow0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHRvcDogMTBweDsNCiAgcmlnaHQ6IDEwcHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCiNsb2dpbkJveCAudXNlciwNCiNsb2dpbkJveCAucGFzcyB7DQogIGZvbnQtc2l6ZTogMTRweDsNCiAgY29sb3I6ICM2NjY7DQogIHBhZGRpbmc6IDVweCAwOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQojbG9naW5Cb3ggaW5wdXQudGV4dCB7DQogIHdpZHRoOiAyMDBweDsNCiAgaGVpZ2h0OiAyNXB4Ow0KICBmb250LXNpemU6IDE0cHg7DQogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQp9DQojbG9naW5Cb3ggLmJ1dHRvbiB7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgcGFkZGluZzogMTBweCAwOw0KfQ0KI2xvZ2luQm94IGlucHV0LnN1Ym1pdCB7DQogIHdpZHRoOiAxMDdweDsNCiAgaGVpZ2h0OiAzMHB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTAyLCAxOTAsIDEzOSk7DQogIGJvcmRlcjogbm9uZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KI2xvZ2luQm94IC5vdGhlciB7DQogIHRleHQtYWxpZ246IHJpZ2h0Ow0KICBwYWRkaW5nOiAxNXB4IDEwcHg7DQogIGZvbnQtc2l6ZTogMTRweDsNCiAgY29sb3I6ICM2NjY7DQoNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KLmljb25mb250IHsNCiAgZm9udC1zaXplOiAyMHB4Ow0KICBjb2xvcjogIzAwMDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICByaWdodDogMTBweDsNCiAgdG9wOiAxMHB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"index\">f\r\n    <!-- Start of Header -->\r\n    <div class=\"header-wrapper\">\r\n      <header>\r\n        <div class=\"container\">\r\n          <div class=\"logo-container\">\r\n            <!-- Website Logo -->\r\n            <span style=\"font-size: 35px;color: white;\"></span>\r\n            <span class=\"tag-line\" style=\"font-size: 20px\"\r\n              >MyCampus————校园信息综合平台</span\r\n            >\r\n          </div>\r\n          <!-- Start of Main Navigation -->\r\n          <nav class=\"main-nav\">\r\n            <div class=\"menu-top-menu-container\">\r\n              <ul id=\"menu-top-menu\" class=\"clearfix\">\r\n                <router-link\r\n                  to=\"/\"\r\n                  tag=\"li\"\r\n                  exact-active-class=\"current-menu-item\"\r\n                >\r\n                  <a>首页</a>\r\n                </router-link>\r\n                <router-link\r\n                  to=\"/activity\"\r\n                  tag=\"li\"\r\n                  exact-active-class=\"current-menu-item\"\r\n                >\r\n                  <a>活动</a>\r\n                </router-link>\r\n\r\n\r\n                <router-link\r\n                  to=\"/help\"\r\n                  tag=\"li\"\r\n                  exact-active-class=\"current-menu-item\"\r\n                >\r\n                  <a>地图气泡</a>\r\n                </router-link>\r\n\r\n\r\n\r\n                <li v-if=\"avatar == ''\">\r\n                  <a @click=\"closein\">登录/注册</a>\r\n                </li>\r\n                <el-dropdown v-else>\r\n                  <a style=\"color: #c1cad1;\">\r\n                    <img\r\n                      v-if=\"unread == 0\"\r\n                      style=\"     height: 20px; \"\r\n                      :src=\"avatar\"\r\n                      class=\"avatar touxiang avatar-60 photo\"\r\n                      height=\"20\"\r\n                      width=\"20\"\r\n                    />\r\n                    <el-badge v-else :value=\"unread\" class=\"item\">\r\n                      <img\r\n                        style=\"     height: 20px; \"\r\n                        :src=\"avatar\"\r\n                        class=\"avatar touxiang avatar-60 photo\"\r\n                        height=\"20\"\r\n                        width=\"20\"\r\n                      />\r\n                    </el-badge>\r\n                    {{ nickname }}\r\n                  </a>\r\n                  <el-dropdown-menu slot=\"dropdown\">\r\n                    <el-dropdown-item>\r\n                      <router-link\r\n                        to=\"/admin/myself\"\r\n                        tag=\"a\"\r\n                        exact-active-class=\"current-menu-item\"\r\n                        >个人中心</router-link\r\n                      >\r\n                    </el-dropdown-item>\r\n\r\n                    <el-dropdown-item>\r\n                      <router-link\r\n                        to=\"/admin/notice\"\r\n                        tag=\"li\"\r\n                        exact-active-class=\"current-menu-item\"\r\n                      >\r\n                        <a v-if=\"unread == 0\">消息中心</a>\r\n                        <el-badge v-else :value=\"unread\" class=\"item\">\r\n                          <a>消息中心</a>\r\n                        </el-badge>\r\n                      </router-link>\r\n                    </el-dropdown-item>\r\n                    <el-dropdown-item>\r\n                      <a @click=\"logout\">退出登录</a>\r\n                    </el-dropdown-item>\r\n                  </el-dropdown-menu>\r\n                </el-dropdown>\r\n                <!-- <router-link to=\"/admin/notice\" tag=\"li\" exact-active-class=\"current-menu-item\">\r\n                  <el-button v-if=\"unread==0\" size=\"mini\" type=\"info\" icon=\"el-icon-bell\" circle></el-button>\r\n                  <el-badge v-else :value=\"unread\" class=\"item\">\r\n                    <img\r\n                      style=\"     height: 20px; \"\r\n                      :src=\"avatar\"\r\n                      class=\"avatar touxiang avatar-60 photo\"\r\n                      height=\"20\"\r\n                      width=\"20\"\r\n                    />\r\n                  </el-badge>\r\n                </router-link>-->\r\n              </ul>\r\n            </div>\r\n            <select\r\n              v-model=\"selected\"\r\n              @change=\"changeHref(parseInt(selected))\"\r\n              class=\"responsive-nav\"\r\n            >\r\n              <option value=\"1\">首页</option>\r\n              <option value=\"2\">问答</option>\r\n              <option value=\"3\">活动</option>\r\n\r\n              <option value=\"4\">登录/注册</option>\r\n            </select>\r\n          </nav>\r\n          <!-- End of Main Navigation -->\r\n        </div>\r\n      </header>\r\n    </div>\r\n    <!-- End of Header -->\r\n    <router-view />\r\n    <!-- start of foot -->\r\n    <foot />\r\n    <!-- end of foot -->\r\n    <!-- 弹窗组件 -->\r\n\r\n    <div class=\"login\" v-if=\"isclose\">\r\n      <div id=\"mask\"></div>\r\n      <div id=\"loginBox\">\r\n        <h2>{{ islogin ? '网站登录' : '新用户注册' }}</h2>\r\n        <div class=\"user\">\r\n          账 号：\r\n          <input type=\"text\" v-model=\"username\" name=\"username\" class=\"text\" />\r\n        </div>\r\n        <div class=\"pass\">\r\n          密 码：\r\n          <input\r\n            type=\"password\"\r\n            v-model=\"password\"\r\n            name=\"password\"\r\n            class=\"text\"\r\n          />\r\n        </div>\r\n        <div class=\"pass\" v-if=\"!islogin\">\r\n          确 认：\r\n          <input\r\n            type=\"password\"\r\n            v-model=\"password1\"\r\n            name=\"password\"\r\n            class=\"text\"\r\n          />\r\n        </div>\r\n        <div class=\"button\" v-if=\"islogin\">\r\n          <input type=\"button\" @click=\"login\" value=\"登录\" class=\"submit\" />\r\n        </div>\r\n        <div class=\"button\" v-else>\r\n          <input\r\n            type=\"button\"\r\n            value=\"注册\"\r\n            @click=\"registered\"\r\n            class=\"submit\"\r\n          />\r\n        </div>\r\n        <div class=\"other\" @click=\"join\">\r\n          {{ islogin ? '注册新用户' : '登录' }}\r\n        </div>\r\n        <a class=\"iconfont\" @click=\"close\">&#xe608;</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: 'index',\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      selected: 1,\r\n      password: '',\r\n      password1: '',\r\n      username: '',\r\n      hover: false,\r\n      search: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      isclose: state => state.user.isclose,\r\n      islogin: state => state.user.islogin,\r\n      avatar: state => state.user.userinfo.avatar,\r\n      nickname: state => state.user.userinfo.nickname,\r\n      unread: state => state.user.unread\r\n    })\r\n  },\r\n  methods: {\r\n    ...mapActions('user', [\r\n      'setUserInfo',\r\n      'changeislog',\r\n      'setToken',\r\n      'join',\r\n      'close',\r\n      'setunread',\r\n      'deleteuserinfo'\r\n    ]),\r\n    //个人hover弹窗\r\n    overShow() {\r\n      this.hover = !this.hover\r\n    },\r\n    changeHref(sortnum) {\r\n      switch (sortnum) {\r\n        case 1:\r\n          this.$router.push({ path: '/' })\r\n          break\r\n        case 2:\r\n          this.$router.push({ path: '/help' })\r\n          break\r\n        case 3:\r\n          this.$router.push({ path: '/activity' })\r\n          break\r\n\r\n        case 6:\r\n          this.close()\r\n          break\r\n      }\r\n    },\r\n    //退出登录\r\n    logout() {\r\n      this.deleteuserinfo()\r\n      this.$message.success('退出成功')\r\n      // window.location.reload();\r\n    },\r\n    joinin() {\r\n      this.join()\r\n    },\r\n    closein() {\r\n      this.close()\r\n    },\r\n    onSubmit() {\r\n      return false\r\n    },\r\n    searchbtn() {\r\n      if (this.search == '') {\r\n        this.$message.error('关键字不能为空')\r\n        return\r\n      }\r\n      this.$router.push({ path: '/search', query: { search: this.search } })\r\n    },\r\n    registered() {\r\n      const userReg = /^[1-9a-zA-Z]{1}[0-9a-zA-Z]{5,9}$/ //6-10位字母数字\r\n      const pwdReg = /^[a-zA-Z]\\w{5,17}$/ //6-18位字母数字下划线 字母开头\r\n      if (!userReg.test(this.username)) {\r\n        this.$message.error('账号为6-10位字母数字字母')\r\n        return\r\n      }\r\n      if (!pwdReg.test(this.password)) {\r\n        this.$message.error('密码为6-18位字母数字或下划线 字母开头')\r\n        return\r\n      }\r\n      if (this.password !== this.password1) {\r\n        this.$message.error('两次密码不相等')\r\n        return\r\n      }\r\n      let obj = {\r\n        password: this.password,\r\n        username: this.username\r\n      }\r\n      this.$axios({\r\n        url: '/webadmin/registered',\r\n        method: 'POST',\r\n        //  headers:{\r\n        //    'Content-Type':'application/x-www-form-urlencoded',\r\n        //    'Authorization': 'Bearer ' + window.localStorage.getItem('luffy_jwt_token')\r\n        //    },\r\n        data: this.qs.stringify(obj)\r\n      })\r\n        .then(res => {\r\n          let data = res.data\r\n          if (data.state.type !== 'SUCCESS') {\r\n            if (data.state.type == 'ERROR_PARAMS_EXIST') {\r\n              this.$message.error('用户名重复')\r\n            } else {\r\n              this.$message.error('注册失败')\r\n            }\r\n            return\r\n          }\r\n          this.$message.success('注册成功请登录')\r\n          this.join()\r\n        })\r\n        .catch(e => {\r\n          this.$message.error(e)\r\n        })\r\n    },\r\n    //登录\r\n    login() {\r\n      if (this.password == '' || this.password == '') {\r\n        this.$message.error('账号或者密码为空')\r\n        return\r\n      }\r\n      // this.pwdhash = crypto\r\n      //   .createHash(\"sha1\")\r\n      //   .update(this.password)\r\n      //   .digest(\"hex\");\r\n      // let this_ = this;\r\n      let obj = {\r\n        password: this.password,\r\n        username: this.username,\r\n        type: ''\r\n      }\r\n      this.$axios({\r\n        url: '/webadmin/login',\r\n        method: 'POST',\r\n        data: this.qs.stringify(obj)\r\n      })\r\n        .then(res => {\r\n          let data = res.data.data\r\n          if (res.data.state.type === 'SUCCESS') {\r\n            this.$message.success('登录成功')\r\n            // this.$store.user.dispatch(\"setUserInfo\", data)\r\n            this.setUserInfo(data.userinfo)\r\n            this.setToken(data.token)\r\n            this.changeislog()\r\n            console.log(data)\r\n            this.close()\r\n          }\r\n          if (res.data.state === 's') {\r\n            let time = moment(res.data.data).format('YYYY-MM-DD HH:mm')\r\n            this.$message.error(`您的账号由于不良行为被限制登录至${time}`)\r\n          }\r\n          if (res.data.state.type === 'ERROE')\r\n            this.$message.error('用户名或密码错误')\r\n        })\r\n        .catch(e => {\r\n          this.$message(e)\r\n        })\r\n    },\r\n    async getnocitenmu() {\r\n      const res = await this.$axios.post(\r\n        '/web/getnotice',\r\n        this.qs.stringify({ num: 1 })\r\n      )\r\n      console.log(res.data)\r\n      this.setunread(res.data.data.count)\r\n    }\r\n  },\r\n  created() {\r\n    localStorage.luffy_jwt_token && this.getnocitenmu()\r\n  }\r\n}\r\n</script>\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.header-btn {\r\n  background-color: #2c696d;\r\n  font-size: 14px;\r\n  line-height: 19px;\r\n  font-weight: 600;\r\n  padding: 14px 30px 15px;\r\n  color: #fff;\r\n  display: table;\r\n  margin: 0 auto;\r\n}\r\n#mask {\r\n  position: fixed;\r\n  z-index: 999;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #000;\r\n  filter: alpha(Opacity=30);\r\n  opacity: 0.2;\r\n  margin: 0;\r\n  /* display: none;  */\r\n}\r\n#loginBox {\r\n  position: fixed;\r\n  left: 50%; /* 定位父级的50% */\r\n  top: 50%;\r\n  transform: translate(-50%, -50%); /*自己的50% */\r\n  z-index: 1000;\r\n  width: 380px;\r\n  height: 330px;\r\n  border: 1px solid #ccc;\r\n  background-color: #fff;\r\n  /* display: none;  */\r\n}\r\n#loginBox h2 {\r\n  height: 40px;\r\n  text-align: center;\r\n  line-height: 40px;\r\n  font-size: 14px;\r\n  letter-spacing: 1px;\r\n  color: #666;\r\n  /* background: url(../images/login_header.png) repeat-x; */\r\n  margin: 0;\r\n  padding: 0;\r\n  border-bottom: 1px solid #ccc;\r\n  margin: 0 0 20px 0;\r\n}\r\n#loginBox h2 img {\r\n  display: block;\r\n  float: right;\r\n  position: relative;\r\n  top: 10px;\r\n  right: 10px;\r\n  cursor: pointer;\r\n}\r\n#loginBox .user,\r\n#loginBox .pass {\r\n  font-size: 14px;\r\n  color: #666;\r\n  padding: 5px 0;\r\n  text-align: center;\r\n}\r\n#loginBox input.text {\r\n  width: 200px;\r\n  height: 25px;\r\n  font-size: 14px;\r\n  border: 1px solid #ccc;\r\n  background-color: #fff;\r\n}\r\n#loginBox .button {\r\n  text-align: center;\r\n  padding: 10px 0;\r\n}\r\n#loginBox input.submit {\r\n  width: 107px;\r\n  height: 30px;\r\n  background-color: rgb(102, 190, 139);\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n#loginBox .other {\r\n  text-align: right;\r\n  padding: 15px 10px;\r\n  font-size: 14px;\r\n  color: #666;\r\n\r\n  cursor: pointer;\r\n}\r\n.iconfont {\r\n  font-size: 20px;\r\n  color: #000;\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 10px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}