{"remainingRequest":"D:\\Desktop\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\InterConnect\\web\\src\\views\\user\\notice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\InterConnect\\web\\src\\views\\user\\notice.vue","mtime":1717936862382},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\InterConnect\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibm90aWNlIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVEYXRhOiAiIiwKICAgICAgbnVtOiAwCiAgICB9OwogIH0sCiAgZmlsdGVyczogewogICAgcGxhdGVuYW1lKHJvdXRlcikgewogICAgICBpZiAocm91dGVyID09ICJoZWxwY29udGVudCIpIHsKICAgICAgICByZXR1cm4gIumXruetlCI7CiAgICAgIH0KICAgICAgCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICB1bnJlYWQ6IHN0YXRlID0+IHN0YXRlLnVzZXIudW5yZWFkLAogICAgICB1cmw6IHN0YXRlID0+IHN0YXRlLnVybAogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoInVzZXIiLCBbInNldHVucmVhZCJdKSwKICAgIGFzeW5jIGdldG5vdGljZWxpc3QoKSB7CiAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KAogICAgICAgICIvd2ViL2dldG5vdGljZSIsCiAgICAgICAgdGhpcy5xcy5zdHJpbmdpZnkoeyBudW06ICIiIH0pCiAgICAgICk7CiAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZS50eXBlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICB0aGlzLnNldHVucmVhZChyZXMuZGF0YS5kYXRhLmNvdW50KTsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGEubGlzdDsKICAgICAgICB0aGlzLm51bSA9IHJlcy5kYXRhLmRhdGEubnVtOwogICAgICAgIGNvbnNvbGUubG9nKCLmtojmga/liJfooagiKTsKICAgICAgICBjb25zb2xlLmxvZygodGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5kYXRhLmxpc3QpKTsKICAgICAgICAvLyB0aGlzLnBhZ2VsaXN0cXVlcnkudG90YWwgPSByZXMuZGF0YS5jb3VudDsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGNoYW5nZW5vdGljZShjaGFuZ2UsIG5vdGljZV9pZCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgKICAgICAgICAiL3dlYi9jaGFuZ2Vub3RpY2UiLAogICAgICAgIHRoaXMucXMuc3RyaW5naWZ5KHsgY2hhbmdlOiBjaGFuZ2UsIG5vdGljZV9pZDogbm90aWNlX2lkIH0pCiAgICAgICk7CiAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZS50eXBlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICB0aGlzLmdldG5vdGljZWxpc3QoKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0bm90aWNlbGlzdCgpOwogIH0KfTsK"},{"version":3,"sources":["notice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notice.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"notice\">\n    <h3>未读消息：{{unread}}/{{num}}</h3>\n    <div style=\"position:relative ;height:30px\">\n      <div class=\"del\">\n        <el-button\n          type=\"text\"\n          icon=\"el-icon-view\"\n          v-if=\"unread!==0\"\n          @click=\"changenotice('changeall','a') \"\n        >全部已读</el-button>\n        <el-button\n          type=\"text\"\n          v-if=\"num!==0\"\n          icon=\"el-icon-delete\"\n          @click=\"changenotice('deleteall','a')\"\n        >全部删除</el-button>\n      </div>\n    </div>\n\n    <el-divider></el-divider>\n    <div v-if=\"num==0\">\n      <img src=\"../../assets/images/noinfo.png\" width=\"100%\" alt />\n      <div style=\"width:100%;text-align:center\">暂无消息通知</div>\n    </div>\n    <div style=\"position:relative\" v-for=\"(notice,id) in tableData\" :key=\"id\">\n      <div\n        style=\"width:10px;height:10px;border-radius:50%;display:inline-block\"\n        :class=\"`state${notice.state}`\"\n      ></div>\n      <span style=\"margin-left:20px\">{{notice.createtime| dataFormat}}</span>\n      <span style=\"margin-left:20px\">{{notice.nickname}}</span>\n      <span style=\"margin-left:20px\">{{notice.action}}</span>\n      <span style=\"margin-left:20px\">\n        来自 {{notice.router| platename}}\n        <a\n          style=\"font-size:20px\"\n          @click=\"changenotice('change',notice.notice_id)\"\n          :href=\"`${url}${notice.router}/${notice.content_id}`\"\n          target=\"_blank\"\n        >{{notice.content_name}}</a>\n      </span>\n      <i class=\"el-icon-delete del\" @click=\"changenotice('delete',notice.notice_id)\"></i>\n      <el-divider></el-divider>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState, mapActions } from \"vuex\";\nexport default {\n  name: \"notice\",\n  data() {\n    return {\n      tableData: \"\",\n      num: 0\n    };\n  },\n  filters: {\n    platename(router) {\n      if (router == \"helpcontent\") {\n        return \"问答\";\n      }\n      \n    }\n  },\n  computed: {\n    ...mapState({\n      unread: state => state.user.unread,\n      url: state => state.url\n    })\n  },\n  methods: {\n    ...mapActions(\"user\", [\"setunread\"]),\n    async getnoticelist() {\n      let res = await this.$axios.post(\n        \"/web/getnotice\",\n        this.qs.stringify({ num: \"\" })\n      );\n      if (res.data.state.type === \"SUCCESS\") {\n        this.setunread(res.data.data.count);\n        this.tableData = res.data.data.list;\n        this.num = res.data.data.num;\n        console.log(\"消息列表\");\n        console.log((this.tableData = res.data.data.list));\n        // this.pagelistquery.total = res.data.count;\n      }\n    },\n    async changenotice(change, notice_id) {\n      let res = await this.$axios.post(\n        \"/web/changenotice\",\n        this.qs.stringify({ change: change, notice_id: notice_id })\n      );\n      if (res.data.state.type === \"SUCCESS\") {\n        this.getnoticelist();\n      }\n    }\n  },\n  created() {\n    this.getnoticelist();\n  }\n};\n</script>\n<style  scoped>\n.del {\n  position: absolute;\n  right: 40px;\n  top: 4px;\n}\n.state0 {\n  background-color: red;\n}\n</style>\n"]}]}